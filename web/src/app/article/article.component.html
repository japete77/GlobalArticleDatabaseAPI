<div *tdLoading="'loading-text'; type:'circular'; mode:'indeterminate'; strategy:'replace'; color:'primary'">
    <div class="article">
        <table cellspacing="0">
            <tr>
                <td class="article-menu">
                    <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Artcile options">
                        <mat-icon>menu</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item [cdkCopyToClipboard]="articleText">
                            <mat-icon>file_copy</mat-icon>
                            <span>Copy Raw Article</span>
                        </button>
                        <button mat-menu-item [cdkCopyToClipboard]="data.articleUpdated.sourceLink">
                            <mat-icon>link</mat-icon>
                            <span>Copy Source Link</span>
                        </button>
                        <button secure [roles]="['ADMIN', 'EDITOR']" mat-menu-item (click)="addTranslation()">
                            <mat-icon>create</mat-icon>
                            <span>Add Translation</span>
                        </button>
                        <button *ngIf="translationIndex > 0" secure [roles]="['ADMIN', 'EDITOR']" mat-menu-item (click)="deleteTranslation()">
                            <mat-icon>delete</mat-icon>
                            <span>Delete Translation</span>
                        </button>
                    </mat-menu>
                </td>
                <td>
                    <mat-form-field class="article-field">
                        <mat-label>Author</mat-label>
                        <input #author matInput [(ngModel)]="data.articleUpdated.author" [matAutocomplete]="autoAuthor">
                        <mat-autocomplete #autoAuthor="matAutocomplete">
                            <mat-option *ngFor="let author of authors" [value]="author">
                                {{author}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field class="article-field">
                        <mat-label>Category</mat-label>
                        <input matInput [(ngModel)]="data.articleUpdated.category" [matAutocomplete]="autoCategory">
                        <mat-autocomplete #autoCategory="matAutocomplete">
                            <mat-option *ngFor="let category of categories" [value]="category">
                                {{category}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field class="article-field">
                        <mat-label>Source</mat-label>
                        <input matInput [(ngModel)]="data.articleUpdated.owner" [matAutocomplete]="autoOwner">
                        <mat-autocomplete #autoOwner="matAutocomplete">
                            <mat-option *ngFor="let owner of owners" [value]="owner">
                                {{owner}}
                            </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field class="article-field article-field--small">
                        <mat-label>Cration Date</mat-label>
                        <input matInput [(ngModel)]="data.articleUpdated.date" [matDatepicker]="dp3" disabled>
                        <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
                        <mat-datepicker #dp3 disabled="false"></mat-datepicker>
                    </mat-form-field>
                </td>
                <td>
                    <mat-form-field class="article-field article-field--small">
                        <mat-label>Words / Chars</mat-label>
                        <input matInput value="{{data.articleUpdated.words}} / {{data.articleUpdated.characters}}" disabled>
                    </mat-form-field>
                </td>
            </tr>
        </table>
        <mat-form-field class="form--full">
            <mat-chip-list #topicList aria-label="Topics">
                <mat-chip *ngFor="let topic of data.articleUpdated.topics" [selectable]="selectable"
                    [removable]="removable" (removed)="remove(topic)">
                    {{topic}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Topics" [matChipInputFor]="topicList"
                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes" [matChipInputAddOnBlur]="addOnBlur"
                    [matAutocomplete]="autoTopics" (matChipInputTokenEnd)="add($event)">
                <mat-autocomplete #autoTopics="matAutocomplete">
                    <mat-option *ngFor="let topic of topics" [value]="topic">
                        {{topic}}
                    </mat-option>
                </mat-autocomplete>
            </mat-chip-list>
        </mat-form-field>
        <mat-form-field class="form--full">
            <mat-label>Source Link</mat-label>
            <input matInput [(ngModel)]="data.articleUpdated.sourceLink">
        </mat-form-field>
        <mat-dialog-content class="mat-typography">
            <mat-tab-group (selectedTabChange)="onTabChanged($event)" [(selectedIndex)]="translationIndex">
                <mat-tab class="tab-content">
                    <ng-template mat-tab-label>
                        <span [ngClass]="['flag-icon', 'flag-icon-' + data.articleUpdated.language]"></span>
                    </ng-template>
                    &nbsp;
                    <mat-form-field class="article-field--full">
                        <mat-label>Title</mat-label>
                        <input matInput [(ngModel)]="data.articleUpdated.title">
                    </mat-form-field>
                    <mat-form-field class="article-field--full">
                        <mat-label>Subtitle</mat-label>
                        <input matInput [(ngModel)]="data.articleUpdated.subtitle">
                    </mat-form-field>
                    <mat-form-field class="article-field--full">
                        <mat-label>Summary</mat-label>
                        <textarea class="form-textarea" matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize"
                            cdkAutosizeMinRows="1" [(ngModel)]="data.articleUpdated.summary">
                        </textarea>
                    </mat-form-field>
                    <div class="article-field--full">
                        <mat-label>Text</mat-label>
                        <ckeditor [editor]="Editor" [(ngModel)]="data.textUpdated"></ckeditor>
                    </div>
                </mat-tab>
                <mat-tab class="tab-content" *ngFor="let translation of data.articleUpdated.translations">
                    <ng-template mat-tab-label>
                        <span [ngClass]="['flag-icon', 'flag-icon-' + translation.language]"></span>
                    </ng-template>
                    &nbsp;
                    <table cellspacing="0">
                        <tr>
                            <td>
                                <mat-form-field class="article-field">
                                    <mat-label>Cration Date</mat-label>
                                    <input matInput [matDatepicker]="dp3" disabled [(ngModel)]="translation.date">
                                    <mat-datepicker-toggle matSuffix [for]="dp3"></mat-datepicker-toggle>
                                    <mat-datepicker #dp3 disabled="false"></mat-datepicker>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field class="article-field">
                                    <mat-label>Translated By</mat-label>
                                    <input matInput [(ngModel)]="translation.translatedBy">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field class="article-field">
                                    <mat-label>Reviewed By</mat-label>
                                    <input matInput [(ngModel)]="translation.reviewedBy">
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field>
                                    <mat-label>Status</mat-label>
                                    <select matNativeControl [(ngModel)]="translation.status" name="status">
                                        <option value=""></option>
                                        <option *ngFor="let item of status" value="{{item}}">{{item}}</option>
                                    </select>
                                </mat-form-field>
                            </td>
                        </tr>
                    </table>
                    <mat-form-field class="article-field--full">
                        <mat-label>Title</mat-label>
                        <input matInput [(ngModel)]="translation.title">
                    </mat-form-field>
                    <mat-form-field class="article-field--full">
                        <mat-label>Subtitle</mat-label>
                        <input matInput [(ngModel)]="translation.subtitle">
                    </mat-form-field>
                    <mat-form-field class="article-field--full">
                        <mat-label>Summary</mat-label>
                        <textarea class="form-textarea" matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize"
                            cdkAutosizeMinRows="1" [(ngModel)]="translation.summary">
                        </textarea>
                    </mat-form-field>
                    <div class="article-field--full">
                        <mat-label>Text</mat-label>
                        <ckeditor [editor]="Editor" [(ngModel)]="data.translationTextUpdated[translation.language]"></ckeditor>
                    </div>
                </mat-tab>
            </mat-tab-group>
        </mat-dialog-content>
        <mat-dialog-actions align="end">
            <button secure [roles]="['ADMIN', 'EDITOR']" mat-raised-button color="primary"
                [mat-dialog-close]="data">Update</button>
            <button mat-raised-button [mat-dialog-close]>Close</button>
        </mat-dialog-actions>
    </div>
</div>